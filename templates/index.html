{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>Select a Tool/Calculator:</h2>

    <div class="calculator-grid" id="calculatorGrid">

    </div>
</div>

<script>
       document.addEventListener('DOMContentLoaded', function() {
           if (sessionStorage.getItem('calculatorGridHTML')) {
               document.getElementById('calculatorGrid').innerHTML = sessionStorage.getItem('calculatorGridHTML');

               if (typeof initializeSearchHandling === 'function') {
                   initializeSearchHandling();
               }
           } else {
               fetch('/home')
                   .then(response => response.json())
                   .then(data => {
                       if (data.error) {
                           console.error('Error loading calculators:', data.error);
                           return;
                       }
                       const grid = document.getElementById('calculatorGrid');
                       const sortedCards = data.cards.sort((a, b) => a.localeCompare(b));
                       grid.innerHTML = sortedCards.join('');
                       sessionStorage.setItem('calculatorGridHTML', grid.innerHTML);


                       if (typeof initializeSearchHandling === 'function') {
                           initializeSearchHandling();
                       }
                   })
                   .catch(error => console.error('Error fetching calculators:', error));
           }
       });
</script>
{% endblock %}